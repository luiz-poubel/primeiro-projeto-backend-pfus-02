<!-- Cabeçalho principal -->
<%- include('../partials/header') %>

<!-- Conteúdo -->
<main class="container text-center mt-3">
  <h1 class="fw-bold mb-4">Lista de Produtos</h1>

  <!-- Botão de cadastro -->
  <a href="/produtos/cadastrar" class="btn btn-lg btn-primary mb-4">
    <i class="bi bi-plus-circle"></i> Cadastrar Produto
  </a>

  <!-- Tabela de produtos -->
   <div class="d-flex flex-wrap justify-content-center gap-3">
    <% produtos.forEach((produto) => { %>
    <div class="card" style="width: 18rem;">
  <img src="<%= produto.imagem %>" class="card-img-top" alt="" height="250px">
  <div class="card-body">
    <h5 class="card-title"><%= produto.nome %></h5>
    <p class="card-text"></p>
  </div>
  <ul class="list-group list-group-flush">
    <li class="list-group-item"><b>Descrição:</b> <%= produto.descricao %></li>
    <li class="list-group-item"><b>Preço:</b> R$ <%= produto.preco %></li>
    <li class="list-group-item"><b>Quantidade:</b> <%= produto.quantidade %></li>
    <li class="list-group-item"><b>Categoria:</b> <%= produto.categoria %></li>
  </ul>
  <div class="card-body">
    <!-- Botão de editar -->
              <a href="/produtos/editar/<%= produto.id %>" class="btn btn-sm btn-warning me-2">
                <i class="bi bi-pencil-square"></i> Editar
              </a>

   <!-- Botão de excluir -->
              <button class="btn btn-sm btn-danger" 
                      onclick="confirmaExclusao('<%= produto.nome %>', '<%= produto.id %>')">
                <i class="bi bi-trash3"></i> Excluir
              </button>
  </div>
</div>
 <% })%>
  </div>
</div>


  <!-- Função JS para confirmar exclusão -->
  <script>
    function confirmaExclusao(nomeProduto, id) {
      if (confirm(`Deseja realmente excluir o produto ${nomeProduto}?`)) {
        window.location.href = `/produtos/deletar/${id}`;
      }
    }
  </script>
</main>

<!-- Rodapé -->
<%- include('../partials/footer') %>
